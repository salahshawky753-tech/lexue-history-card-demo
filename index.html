<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ä¹å­¦æˆé•¿å¡ - å†å²æ–‡åŒ–ç¯‡</title>
<style>
  :root {
    --bg-color: #FDF6E3;
    --text-color: #333;
    --accent-color: #B58900;
    --font-size: 16px;
  }
  body {
    margin:0;
    font-family: "Microsoft YaHei", sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    font-size: var(--font-size);
  }
  header {
    background-image: url('https://cdn.jsdelivr.net/gh/lexue-tz/assets/history-bg.jpg'); /* æ”¹æˆå›½å†…å¯ç”¨ CDN é“¾æ¥ */
    background-size: cover;
    background-position:center;
    color: #fff;
    padding: 20px;
    text-align: center;
  }
  section {
    padding: 15px;
    line-height: 1.6;
  }
  .controls { display: flex; gap:10px; margin-bottom:10px;}
  button { padding: 6px 12px; font-size: 1em; cursor:pointer; }
  .game, .quiz {margin-top:20px; padding:10px; border:1px solid #ccc; border-radius:8px;}
  .quiz input {margin-right:5px;}
  .highlight {color: var(--accent-color); font-weight: bold;}
</style>
</head>
<body>

<header>
  <h1>ä¹å­¦æˆé•¿å¡ï¼šå†å²æ–‡åŒ–ç¯‡</h1>
  <p>å°å­¦ä¸­å¹´çº§</p>
</header>

<section>
  <div class="controls">
    <button onclick="changeFontSize(1)">A+</button>
    <button onclick="changeFontSize(-1)">A-</button>
    <button onclick="toggleVoice()">ğŸ”Š è¯­éŸ³</button>
  </div>
  
  <h2>çŸ¥è¯†è¦ç‚¹</h2>
  <div>
    <p id="para1">ã€æœ—è¯»1ã€‘æ³°å·è‡ªå¤ä¸ºæ°´é™†è¦å†²ï¼Œç´ æœ‰â€œæ±‰å”åéƒ¡â€ä¹‹ç§°ã€‚</p>
    <button onclick="readText('para1')">æœ—è¯»æ®µè½1</button>
  </div>
  <div>
    <p id="para2">ã€æœ—è¯»2ã€‘å¤è¿æ²³ç©¿åŸè€Œè¿‡ï¼Œè§è¯äº†æ•°ç™¾å¹´çš„å•†è´¸ç¹è£ä¸æ–‡åŒ–äº¤æµã€‚</p>
    <button onclick="readText('para2')">æœ—è¯»æ®µè½2</button>
  </div>

  <h2>åŠ¨ç”»å±•ç¤º</h2>
  <svg width="100%" height="120">
    <circle id="boat" cx="0" cy="60" r="20" fill="#B58900" onclick="clickBoat()"/>
    æŠ±æ­‰ï¼Œæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒSVGã€‚
  </svg>

  <div class="game">
    <h3>å°æ¸¸æˆï¼šæ‰¾ä¸åŒ</h3>
    <p>ç‚¹å‡»é»„é‡‘åœˆï¼Œè®©å®ƒå˜è“ï¼Œæ‰¾åˆ° 3 æ¬¡å³å¯å®Œæˆä»»åŠ¡ï¼ˆå¾— 4 åˆ†ï¼Œé™ä¸€æ¬¡ï¼‰ã€‚</p>
    <p id="gameStatus">å½“å‰å·²æ‰¾åˆ°ï¼š0 / 3</p>
  </div>

  <div class="quiz">
    <h3>çŸ¥è¯†é—®ç­”ï¼ˆæ¯é¢˜ 3 åˆ†ï¼Œå…± 6 åˆ†ï¼‰</h3>
    <p>1. æ³°å·æœ‰â€œæ±‰å”åéƒ¡â€ä¹‹ç§°ï¼Œå¯¹å—ï¼Ÿ</p>
    <label><input type="radio" name="q1" value="true">å¯¹</label>
    <label><input type="radio" name="q1" value="false">é”™</label>

    <p>2. å¤è¿æ²³æ˜¯æ³°å·å†å²æ–‡åŒ–çš„é‡è¦è§è¯ï¼Œå¯¹å—ï¼Ÿ</p>
    <label><input type="radio" name="q2" value="true">å¯¹</label>
    <label><input type="radio" name="q2" value="false">é”™</label>

    <br/>
    <button onclick="checkQuiz()">æäº¤ç­”æ¡ˆ</button>
    <p id="quizResult"></p>
  </div>
</section>

<script>
  // é…ç½®
  const CONFIG = { maxPointsPerCard: 10, gamePoints: 4, quizPoints: 3 };
  let voiceOn = false;
  let synth = window.speechSynthesis;
  let points = 0;
  let gameCount = 0;
  let gameComplete = false;

  function changeFontSize(delta) {
    let root = document.documentElement;
    let current = parseFloat(getComputedStyle(root).fontSize);
    root.style.fontSize = (current + delta) + 'px';
  }
  function toggleVoice(){
    voiceOn = !voiceOn;
    alert("è¯­éŸ³åŠŸèƒ½å·²" + (voiceOn ? "å¼€å¯" : "å…³é—­"));
  }
  function readText(id) {
    if(!voiceOn) return;
    let text = document.getElementById(id).innerText;
    let utter = new SpeechSynthesisUtterance(text);
    utter.lang = 'zh-CN';
    synth.speak(utter);
  }

  let pos = 0;
  setInterval(()=>{
    pos+=2;
    document.getElementById("boat").setAttribute("cx", pos % window.innerWidth);
  },50);

  // æ¸¸æˆé€»è¾‘
  function clickBoat(){
    if(gameComplete) return;
    gameCount++;
    document.getElementById("boat").setAttribute("fill", "blue");
    document.getElementById("gameStatus").innerText = `å½“å‰å·²æ‰¾åˆ°ï¼š${gameCount} / 3`;
    if(gameCount >= 3){
      gameComplete = true;
      points += CONFIG.gamePoints;
      if(points > CONFIG.maxPointsPerCard) points = CONFIG.maxPointsPerCard;
      document.getElementById("gameStatus").innerText += ` âœ… æ¸¸æˆå®Œæˆï¼è·å¾— ${CONFIG.gamePoints} åˆ†ã€‚å½“å‰æ€»åˆ†ï¼š${points}`;
    }
  }

  // ç­”é¢˜é€»è¾‘
  function checkQuiz(){
    let scoreThisQuiz = 0;
    let q1 = document.querySelector('input[name="q1"]:checked');
    let q2 = document.querySelector('input[name="q2"]:checked');
    if(!q1 || !q2){ alert("è¯·ç­”å®Œæ‰€æœ‰é¢˜ç›®"); return;}
    if(q1.value === "true") scoreThisQuiz += CONFIG.quizPoints;
    if(q2.value === "true") scoreThisQuiz += CONFIG.quizPoints;

    points += scoreThisQuiz;
    if(points > CONFIG.maxPointsPerCard) points = CONFIG.maxPointsPerCard;

    document.getElementById("quizResult").innerHTML = `ç­”é¢˜å¾—åˆ†ï¼š${scoreThisQuiz} åˆ†ï¼Œå½“å‰æ€»åˆ†ï¼š${points}`;
  }
</script>
</body>
</html>
